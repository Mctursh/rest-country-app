(this["webpackJsonprest-country-api-with-color-theme"]=this["webpackJsonprest-country-api-with-color-theme"]||[]).push([[0],{30:function(e,t,n){},31:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(23),s=n.n(r),i=(n(30),n(16)),o=(n(31),n(6)),l=n(13),h=n(2),u=n(3),d=n(8),j=n(5),p=n(4),b=Object(a.createContext)("dark"),f=n(0),O=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(e){return Object(h.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.context,t=this.props,n=t.name,a=t.flag,c=t.region,r=t.population,s=t.capital;return Object(f.jsx)(l.b,{to:"/countries/".concat(n.toLowerCase()),children:Object(f.jsxs)("div",{className:"country-info country-info-".concat(e),children:[Object(f.jsx)("div",{className:"img-parent",children:Object(f.jsx)("img",{src:a,alt:"".concat(n,"'s flag")})}),Object(f.jsxs)("div",{className:"country-metadata metadata-".concat(e),children:[Object(f.jsx)("p",{className:"country-name",children:n}),Object(f.jsxs)("p",{className:"rest",children:["Population: ",Object(f.jsx)("span",{className:"value",children:r})]}),Object(f.jsxs)("p",{className:"rest",children:["Region: ",Object(f.jsx)("span",{className:"value",children:c})]}),Object(f.jsxs)("p",{className:"rest",children:["Capital: ",Object(f.jsx)("span",{className:"value",children:s})]})]})]})})}}]),n}(a.Component);O.contextType=b;var m=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={dropDown:!1},a.showDropDown=a.showDropDown.bind(Object(d.a)(a)),a.filter=a.filter.bind(Object(d.a)(a)),a}return Object(u.a)(n,[{key:"showDropDown",value:function(){this.setState((function(e){return{dropDown:!e.dropDown}}))}},{key:"filter",value:function(e){this.props.handleFilter(e),this.showDropDown()}},{key:"render",value:function(){var e=this,t=this.context,n=this.state.dropDown,a={display:n?"block":"none"};return Object(f.jsxs)("div",{className:"filter-parent",children:[Object(f.jsxs)("div",{className:"filter filter-".concat(t),children:[Object(f.jsx)("p",{children:"Filter by Region: ".concat(this.props.currentRegion)}),Object(f.jsx)("i",{onClick:this.showDropDown,className:"fas fa-angle-".concat(n?"down":"up"," dd-btn")})]}),Object(f.jsx)("div",{style:a,className:"region-parent region-parent-".concat(t),children:Object(f.jsxs)("ul",{className:"country-list-".concat(t," region-parent-").concat(t),children:[Object(f.jsx)("li",{onClick:function(){return e.filter("Africa")},className:"li li-".concat(t),children:"Africa"}),Object(f.jsx)("li",{onClick:function(){return e.filter("Americas")},className:"li li-".concat(t),children:"America"}),Object(f.jsx)("li",{onClick:function(){return e.filter("Asia")},className:"li li-".concat(t),children:"Asia"}),Object(f.jsx)("li",{onClick:function(){return e.filter("Europe")},className:"li li-".concat(t),children:"Europe"}),Object(f.jsx)("li",{onClick:function(){return e.filter("Oceania")},className:"li li-".concat(t),children:"Oceania"})]})})]})}}]),n}(a.Component);m.contextType=b;var v=m,x=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.context;return Object(f.jsx)("div",{className:"loader pad",children:Object(f.jsxs)("div",{className:"lds-ripple lds-ripple-".concat(e),children:[Object(f.jsx)("div",{}),Object(f.jsx)("div",{})]})})}}]),n}(a.Component);x.contextType=b;var y=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(e){return Object(h.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return Object(f.jsx)("div",{onClick:function(){return e.props.handleClear()},className:"cancel",children:Object(f.jsx)("i",{className:"fas fa-times fa-times-".concat(this.props.theme)})})}}]),n}(a.Component),g=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={searchText:"",active:!1},a.handleChange=a.handleChange.bind(Object(d.a)(a)),a.handleClear=a.handleClear.bind(Object(d.a)(a)),a}return Object(u.a)(n,[{key:"handleChange",value:function(e){this.props.handleSearch(e.target.value),this.setState((function(){return{searchText:e.target.value}})),e.target.value.length>0?this.setState({active:!0}):this.setState({active:!1})}},{key:"handleClear",value:function(){this.props.handleSearch(""),this.setState({searchText:"",active:!1})}},{key:"render",value:function(){var e=this.context,t=this.state,n=t.searchText,a=t.active;return Object(f.jsxs)("div",{className:"search-parent search-parent-".concat(e),children:[Object(f.jsx)("i",{className:"fas fa-search fa-search-".concat(e)}),Object(f.jsx)("input",{onChange:this.handleChange,value:n,type:"search",id:"search-".concat(e),placeholder:"Search for a country..."}),a&&Object(f.jsx)(y,{theme:e,handleClear:this.handleClear})]})}}]),n}(a.Component);g.contextType=b;var k=g,C=n(25),N=n(17),S=function(e,t){for(var n=[],a=0;a<e.length;)n.push(e.slice(a,t+a)),a+=t;return n},w=function(e){!function t(n){fetch("https://restcountries.eu/rest/v2/all/").then((function(a){if(a.ok)return a.json();if(!(n<3))throw Error();setTimeout((function(){return t(e)}),1e3)})).then((function(t){var n=t.map((function(e){return e.name})),a=S(t,12);e.setState({CountryNames:n,chunksFormed:a.length-1,chunks:a,displaying:a[0],fetched:!0})})).catch((function(){return e.setState({error:!0,errorMsg:"Couldn't Fetch Countries"})}))}(0)},F=function(e,t){!function n(a){fetch("https://restcountries.eu/rest/v2/all").then((function(t){if(t.ok)return t.json();if(!(a<3))throw Error();setTimeout((function(){return n(e)}),1e3)})).then((function(n){var a=n.filter((function(e){return e.name.toLowerCase()==t})),c=n.map((function(e){var t=e.name,n=e.alpha3Code;return Object(C.a)({},n,t)}));e.setState({country:a,fetched:!0,countryNames:c,currCountry:t})})).catch((function(){return e.setState({error:!0,errorMsg:"Couldn't Fetch Country Data"})}))}(0)},D=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(e){return Object(h.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.context;return Object(f.jsx)("div",{className:"load-more-parent",children:Object(f.jsxs)("button",{className:"load-more load-".concat(e," ").concat(this.props.class),onClick:this.props.handleClick,children:["Back"==this.props.value?Object(f.jsxs)("span",{children:[Object(f.jsx)("i",{className:"fas fa-arrow-left"}),"Back"]}):this.props.value," "]})})}}]),n}(a.Component);D.contextType=b;var T=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(e){return Object(h.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"render",value:function(){return Object(f.jsxs)("div",{className:"not-found not-found-".concat(this.props.theme),children:[Object(f.jsx)("p",{children:this.props.value?this.props.value:"404 Page Not Found"}),this.props.children]})}}]),n}(c.a.Component),L=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={chunksFormed:1/0,fetched:!1,error:!1,errorMsg:"",displayedChunk:0,displaying:[],chunks:null,isSearching:!1,notFound:!1,isFiltered:!1,currentRegion:"All",filteredChunks:null,filteredChunksFormed:1/0},a.handleLoad=a.handleLoad.bind(Object(d.a)(a)),a.handleSearch=a.handleSearch.bind(Object(d.a)(a)),a.handleFilter=a.handleFilter.bind(Object(d.a)(a)),a.retry=a.retry.bind(Object(d.a)(a)),a}return Object(u.a)(n,[{key:"getCountries",value:function(){w(this)}},{key:"retry",value:function(){this.setState({error:!1}),w(this)}},{key:"handleLoad",value:function(){var e;(e=this).setState((function(t){var n=t.displaying;return e.state.fetched?{displayedChunk:t.displayedChunk+1,displaying:[].concat(Object(N.a)(n),Object(N.a)(t.chunks[t.displayedChunk+1]))}:e.state.isFiltered?{displayedChunk:t.displayedChunk+1,displaying:[].concat(Object(N.a)(n),Object(N.a)(t.filteredChunks[t.displayedChunk+1]))}:void 0}))}},{key:"handleSearch",value:function(e){!function(e,t){e.length>=1?(t.setState({isSearching:!0,fetched:!1,isFiltered:!1,notFound:!1}),function(n){var a,c=(a=e,n.filter((function(e){return e.slice(0,a.length).toLowerCase()==a.toLowerCase()})).sort());if(c.length>0){var r=[].concat.apply([],t.state.chunks).filter((function(e){return c.includes(e.name)}));t.setState({displaying:r,matchedSearch:r})}else t.setState({notFound:!0}),console.log("no match")}([].concat.apply([],t.state.chunks).map((function(e){return e.name})))):(t.setState({fetched:!0,isSearching:!1,isFiltered:!1,displaying:t.state.chunks[0],displayedChunk:0,notFound:!1}),t.handleFilter("All"))}(e,this)}},{key:"handleFilter",value:function(e){!function(e,t){"All"==e?t.setState({currentRegion:"All"}):function(){t.setState({fetched:!1,isSearching:!1,isFiltered:!0});var n=[].concat.apply([],t.state.chunks).filter((function(t){return t.region==e})),a=S(n,12);t.setState({filteredChunks:a,displaying:a[0],displayedChunk:0,filteredChunksFormed:a.length-1,currentRegion:e})}()}(e,this)}},{key:"componentDidMount",value:function(){this.getCountries()}},{key:"render",value:function(){var e=this.state,t=e.errorMsg,n=e.error,a=e.chunksFormed,c=e.displayedChunk,r=e.fetched,s=e.displaying,i=e.isSearching,o=e.isFiltered,l=e.filteredChunksFormed,h=e.currentRegion,u=e.notFound;return Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:"pad body",children:[Object(f.jsx)(k,{handleSearch:this.handleSearch}),Object(f.jsx)(v,{handleFilter:this.handleFilter,currentRegion:h})]}),n&&Object(f.jsx)(T,{value:t,theme:this.props.theme,children:Object(f.jsx)(D,{value:"Try Again",handleClick:this.retry})}),Object(f.jsx)("div",{className:"pad country-parent ",children:r||i&&!u||o?s.map((function(e,t){var n=e.flag,a=e.name,c=e.population,r=e.region,s=e.capital,i=e.nativeName;return Object(f.jsx)(O,{nativeName:i,flag:n,name:a,population:c,region:r,capital:s},t)})):null}),!r&&!i&&!o&&!n&&Object(f.jsx)(x,{}),r&&!i&&c<a&&Object(f.jsx)(D,{value:"Load More",handleClick:this.handleLoad}),o&&c<l&&Object(f.jsx)(D,{value:"Load More",handleClick:this.handleLoad}),u&&Object(f.jsx)(T,{value:"No Country Match",theme:this.props.theme})]})}}]),n}(c.a.Component),A=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(e){return Object(h.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.context,t=this.props,n=t.flag,a=t.name,c=t.population,r=t.region,s=t.nativeName,o=t.subregion,h=t.capital,u=t.topLevelDomain,d=t.currencies,j=t.languages,p=t.borders,b=t.countryNames,O=t.fetchNewCountry,m=b.filter((function(e){var t=Object.keys(e),n=Object(i.a)(t,1)[0];return p.includes(n)})).map((function(e){return Object.values(e)}));return Object(f.jsxs)("div",{className:"info-parent",children:[Object(f.jsx)("div",{className:"info-image-parent",children:Object(f.jsx)("img",{src:n,alt:"".concat(a,"'s flag")})}),Object(f.jsxs)("div",{className:"info-metadata-parent info-".concat(e),children:[Object(f.jsx)("p",{className:"country-name",children:a}),Object(f.jsxs)("div",{className:"info-metadata-child",children:[Object(f.jsxs)("div",{children:[Object(f.jsxs)("p",{className:"rest",children:["Native Name: ",Object(f.jsx)("span",{className:"value",children:s})]}),Object(f.jsxs)("p",{className:"rest",children:["Population: ",Object(f.jsx)("span",{className:"value",children:c})]}),Object(f.jsxs)("p",{className:"rest",children:["Region: ",Object(f.jsx)("span",{className:"value",children:r})]}),Object(f.jsxs)("p",{className:"rest",children:["Sub Region: ",Object(f.jsx)("span",{className:"value",children:o})]}),Object(f.jsxs)("p",{className:"rest",children:["Capital: ",Object(f.jsx)("span",{className:"value",children:h})]})]}),Object(f.jsxs)("div",{children:[Object(f.jsxs)("p",{className:"rest",children:["Top Level Domain: ",Object(f.jsx)("span",{className:"value",children:u})]}),Object(f.jsxs)("p",{className:"rest",children:["Currencies: ",d.map((function(e,t){return Object(f.jsx)("span",{className:"value",children:0==t||t==d.length-1?e.name:", ".concat(e.name,", ")},t)}))]}),Object(f.jsxs)("p",{className:"rest",children:["Languages: ",j.map((function(e,t){return Object(f.jsx)("span",{className:"value",children:0==t||t==j.length-1?e.name:", ".concat(e.name,", ")},t)}))]})]})]}),p.length>0&&Object(f.jsxs)("div",{className:"border-countries",children:[Object(f.jsx)("p",{className:"rest",children:"Border Countries:"}),m.map((function(e,t){var n=Object(i.a)(e,1)[0];return Object(f.jsx)(l.b,{onClick:function(){return O(n.toLowerCase())},to:"/countries/".concat(n.toLowerCase()),children:Object(f.jsx)(D,{class:"border",value:n})},t)}))]})]})]})}}]),n}(a.Component);A.contextType=b;var M=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={currCountry:"",fetched:!1,country:[],error:!1,errorMsg:"",countryNames:""},a.fetchSelected=a.fetchSelected.bind(Object(d.a)(a)),a.handleBack=a.handleBack.bind(Object(d.a)(a)),a.retry=a.retry.bind(Object(d.a)(a)),a}return Object(u.a)(n,[{key:"componentDidUpdate",value:function(){this.props.match.params.country!=this.state.currCountry&&(console.log(this.props.match.params.country),this.fetchSelected(this.props.match.params.country))}},{key:"handleBack",value:function(){this.props.history.goBack()}},{key:"fetchSelected",value:function(e){this.setState({currCountry:e,fetched:!1}),F(this,e)}},{key:"retry",value:function(){this.setState({error:!1}),F(this,this.props.match.params.country)}},{key:"componentDidMount",value:function(){this.fetchSelected(this.props.match.params.country)}},{key:"render",value:function(){var e=this,t=this.state,n=t.fetched,a=t.country,c=t.error,r=t.errorMsg,s=t.countryNames,i=this.context;return Object(f.jsxs)("div",{className:"pad",children:[Object(f.jsx)("div",{className:"back",children:Object(f.jsx)(D,{handleClick:this.handleBack,value:"Back",class:"back-btn"})}),c&&Object(f.jsx)(T,{value:r,theme:i,children:Object(f.jsx)(D,{value:"Try Again",handleClick:this.retry})}),n&&a.map((function(t,n){var a=t.flag,c=t.name,r=t.population,i=t.region,o=t.nativeName,l=t.subregion,h=t.capital,u=t.topLevelDomain,d=t.currencies,j=t.languages,p=t.borders;return Object(f.jsx)(A,{fetchNewCountry:e.fetchSelected,countryNames:s,flag:a,name:c,population:r,region:i,nativeName:o,subregion:l,capital:h,topLevelDomain:u,currencies:d,languages:j,borders:p},n)})),!n&&!c&&Object(f.jsx)(x,{})]})}}]),n}(a.Component);M.contextType=b;var B=function(e){Object(j.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).handleToggle=a.props.handleToggle,a}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return Object(f.jsxs)("header",{className:"header header-".concat(this.context," pad"),children:[Object(f.jsx)("h3",{children:"Where in the world?"}),Object(f.jsxs)("div",{onClick:function(){return e.handleToggle()},className:"dark-container",children:[Object(f.jsx)("i",{className:"fas fa-moon"}),Object(f.jsx)("h6",{children:"Dark Mode"})]})]})}}]),n}(c.a.Component);B.contextType=b;var R=B;function E(e){var t=e.handleToggle,n=Object(a.useContext)(b),c=Object(o.f)();return Object(f.jsx)(l.a,{baseline:"/rest-country-app",history:c,children:Object(f.jsxs)("div",{className:"App App-".concat(n),children:[Object(f.jsx)(R,{handleToggle:t}),Object(f.jsxs)(o.c,{children:[Object(f.jsx)(o.a,{exact:!0,path:"/",children:Object(f.jsx)(L,{theme:n})}),Object(f.jsx)(o.a,{path:"/countries/:country",component:M}),Object(f.jsx)(o.a,{children:Object(f.jsx)(T,{theme:n})})]})]})})}var P=function(){var e=Object(a.useState)("dark"),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(f.jsx)(b.Provider,{value:n,children:Object(f.jsx)(E,{handleToggle:function(){c((function(e){return"dark"==e?"light":"dark"}))}})})};s.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(P,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.06429a30.chunk.js.map